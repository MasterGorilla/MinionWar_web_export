[gd_scene load_steps=8 format=3 uid="uid://cy1m3rvr5f7d4"]

[ext_resource type="Script" uid="uid://k0v4jif012n5" path="res://Scripts/explosion.gd" id="1_7hh0n"]
[ext_resource type="Script" uid="uid://cinbysou3f8fv" path="res://Scripts/explosion_effect.gd" id="1_e44av"]
[ext_resource type="Shape3D" uid="uid://bl281eoei7jdm" path="res://Meshes and Shapes/ExplosionEffectCollision.shape" id="2_bqxfi"]
[ext_resource type="AudioStream" uid="uid://bw617fmvkccvo" path="res://SFX/Explosion.mp3" id="3_6saew"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_nlb0y"]
emission_shape = 1
emission_sphere_radius = 0.1
radial_velocity_min = 4.99998
radial_velocity_max = 4.99998
gravity = Vector3(0, 0, 0)
radial_accel_min = 5.0
radial_accel_max = 10.0
collision_mode = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_6saew"]
transparency = 1
albedo_color = Color(0.274197, 0.267022, 0.261898, 0.639216)

[sub_resource type="SphereMesh" id="SphereMesh_bqxfi"]
material = SubResource("StandardMaterial3D_6saew")
radius = 0.3
height = 0.6

[node name="ExplosionEffect" type="Area3D"]
collision_layer = 4
collision_mask = 7
script = ExtResource("1_e44av")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = ExtResource("2_bqxfi")

[node name="Explosion" type="GPUParticles3D" parent="."]
emitting = false
amount = 64
lifetime = 0.4
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_nlb0y")
draw_pass_1 = SubResource("SphereMesh_bqxfi")
script = ExtResource("1_7hh0n")

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("3_6saew")
autoplay = true

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="finished" from="Explosion" to="Explosion" method="_on_finished"]
[connection signal="finished" from="AudioStreamPlayer3D" to="." method="_on_explosion_finished"]
